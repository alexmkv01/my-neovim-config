# Ruff configuration matching org standards
target-version = "py313"
extend-exclude = [".venv", ".git", "__pycache__", "build", "dist", "tmp"]
preview = true  # Enable preview rules including W391

[lint]
select = [
    "B",      # flake8-bugbear
    "C4",     # flake8-comprehensions
    "COM819", # trailing comma
    "E",      # pycodestyle errors
    "F",      # pyflakes
    "G",      # flake8-logging-format
    "I",      # isort
    "LOG",    # flake8-logging
    "PT",     # flake8-pytest-style
    "Q",      # flake8-quotes
    "RUF",    # Ruff-specific rules
    "UP",     # pyupgrade
    "W",      # pycodestyle warnings (includes W292 and W391 with preview)
]

ignore = ["E501"]  # Ignore line too long

unfixable = ["B"]  # Don't auto-fix flake8-bugbear issues

[lint.mccabe]
max-complexity = 12

[lint.flake8-quotes]
docstring-quotes = "double"

[lint.flake8-bugbear]
# Allow default arguments like, e.g., `data: List[str] = fastapi.Query(None)`.
extend-immutable-calls = ["tenacity.AsyncRetrying"]

[lint.isort]
combine-as-imports = true
known-first-party = ["straight_outta_prompton"]